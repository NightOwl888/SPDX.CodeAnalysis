<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <Nullable>enable</Nullable>
    <AssemblyName>SPDX.CodeAnalysis</AssemblyName>
    <RootNamespace>SPDX.CodeAnalysis</RootNamespace>

    <!-- This is needed so that the cross-platform C# language server can find the generated Resources.Designer.cs file -->
    <!-- see: https://github.com/dotnet/msbuild/issues/8086 -->
    <CoreCompileDependsOn>PrepareResources;$(CompileDependsOn)</CoreCompileDependsOn>
    <GenerateResourceUsePreserializedResources>true</GenerateResourceUsePreserializedResources>
    <PreferredUILang>en-US</PreferredUILang>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.CodeAnalysis.Analyzers" Version="$(MicrosoftCodeAnalysisAnalyzersPackageReferenceVersion)">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
    <PackageReference Include="Microsoft.CodeAnalysis.Common" Version="$(MicrosoftCodeAnalysisCommonPackageReferenceVersion)" />
  </ItemGroup>

  <ItemGroup>
    <!--
      This approach allows the Resources.designer.cs file to be generated into obj,
      instead of checked into source control. It also fixes an issue with JetBrains Rider
      where it doesn't generate comments on the generated properties.
      See: https://github.com/dotnet/msbuild/issues/8086
      and https://youtrack.jetbrains.com/issue/RIDER-74074/PublicResXFileCodeGenerator-does-not-generate-comments-and-the-order-of-properties-changes
    -->
    <EmbeddedResource Update="Resources.resx">
      <Generator>MSBuild:Compile</Generator>
      <StronglyTypedFileName>$(IntermediateOutputPath)Resources.designer.cs</StronglyTypedFileName>
      <StronglyTypedLanguage>CSharp</StronglyTypedLanguage>
      <StronglyTypedNamespace>SPDX.CodeAnalysis</StronglyTypedNamespace>
      <StronglyTypedClassName>Resources</StronglyTypedClassName>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\SPDX.Common\SPDX.Common.csproj" />
  </ItemGroup>

  <ItemGroup>
    <InternalsVisibleTo Include="SPDX.CodeAnalysis.Common.Tests" />
  </ItemGroup>

</Project>
